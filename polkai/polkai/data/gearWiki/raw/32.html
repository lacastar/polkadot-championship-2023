{"title":"Gear Documentation Portal","softTitle":"Gear Documentation Portal","date":null,"author":[],"publisher":null,"copyright":null,"description":"gclient is intended to be used as a tool for testing Gear programs with a real blockchain network. It allows you to send extrinsics and RPCs by connecting to the network. We recommend using gclient for end-to-end testing to ensure the program works as expected in the real blockchain world.","lang":"en","canonicalLink":"https://wiki.gear-tech.io/docs/developing-contracts/testing-gclient","tags":[],"image":"https://wiki.gear-tech.io/img/ogimage.jpg","videos":[],"links":[{"text":"https://get.gear.rs","href":"https://get.gear.rs"},{"text":"previous section","href":"/docs/developing-contracts/testing#building-a-program-in-test-mode"},{"text":"Getting Started","href":"/docs/getting-started-in-5-minutes#creating-your-first-gear-smart-contract"},{"text":"gclient docs","href":"https://docs.gear.rs/gclient/"}],"text":"gclient is intended to be used as a tool for testing Gear programs with a real blockchain network. It allows you to send extrinsics and RPCs by connecting to the network. We recommend using gclient for end-to-end testing to ensure the program works as expected in the real blockchain world.\n\nIt is essential to underline that testing with gclient requires the running node as the second part of the test suite. The gclient interacts with the node over the WebSocket protocol. Depending on the purpose of testing, gclient can communicate with either a local or a remote node. The best choice is to use the local node in developer mode for initial debugging and continuous integration.\n\nTesting with gclient is slower than gtest and produces more build artifacts, so it is better suited as the last mile in quality control. However, gclient gives the most accurate test results.\n\nTo use the gclient library, you must import it into your Cargo.toml file in the [dev-dependencies] block. Also, you need to add some external crates that are used together with gclient:\n\nThe best way is to download the latest node binary for your operating system from https://get.gear.rs. Then unpack the package and run the node. Here and below, we assume the node is running in developer mode.\n\nOpen the second terminal window and run tests using cargo as it was described in the previous section.\n\nLet's add an end-to-end test to our first-gear-app introduced in the Getting Started section.\n\nAdd the tests directory next to the src directory and create the end2end.rs file in it.\n\nRun the following command and wait for all tests to be green:\n\nIt's recommended to mark with the #[ignore] attribute tests with gclient to separate their slow execution from the rest. To execute ignored tests with Cargo, add the --include-ignored flag after a double dash (--) as shown above.\n\nLet's explore what we've done in the test function above.\n\nFirstly, we instantiate the API that allows interaction with the node by calling correspondent extrinsics. Then we create an event listener, as getting the feedback from the node is possible only by subscribing to events. We use the API instance both for invoking RPC calls (e.g., calculating the gas amount needed for processing) and sending extrinsics (e.g., uploading the program and sending a message). Events listener allows us to get the result of operation.\n\nPlease refer to the gclient docs for more information about its capabilities and use cases."}