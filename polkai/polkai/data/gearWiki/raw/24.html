{"title":"Gear Documentation Portal","softTitle":"Gear Documentation Portal","date":null,"author":[],"publisher":null,"copyright":null,"description":"When the program sends a message to the user (e.g., using the msg::send function), this message is placed in the user's mailbox. Actually, the mailbox is a dedicated storage that keeps a message received from a program.","lang":"en","canonicalLink":"https://wiki.gear-tech.io/docs/developing-contracts/mailbox","tags":[],"image":"https://wiki.gear-tech.io/img/ogimage.jpg","videos":[],"links":[{"text":"msg::send","href":"https://docs.gear.rs/gstd/msg/fn.send.html"},{"text":"UserMessageSent","href":"https://docs.gear.rs/pallet_gear/pallet/enum.Event.html#variant.UserMessageSent"},{"text":"msg::reply","href":"https://docs.gear.rs/gstd/msg/fn.reply.html"},{"text":"https://idea.gear-tech.io/mailbox","href":"https://idea.gear-tech.io/mailbox"},{"text":"send_reply","href":"https://docs.gear.rs/pallet_gear/pallet/struct.Pallet.html#method.send_reply"},{"text":"claim_value","href":"https://docs.gear.rs/pallet_gear/pallet/struct.Pallet.html#method.claim_value"}],"text":"When the program sends a message to the user (e.g., using the msg::send function), this message is placed in the user's mailbox. Actually, the mailbox is a dedicated storage that keeps a message received from a program.\n\nThe user can detect a message received by subscribing to the UserMessageSent event. It's important to note that the reply (sent using the msg::reply function) doesn't go to the mailbox, it just generates an event.\n\nWhen using the IDEA website one should go to the https://idea.gear-tech.io/mailbox section.\n\nLet's explore possible user reactions to the mailbox's message.\n\nThe program can send a message to the user and wait for a reply from him. The user can reply using a send_reply extrinsic. The value associated with the message is transferred to the user's account, the message is removed from the mailbox, and the new reply message is added to the message queue.\n\nIf a message in the mailbox has an associated value, the user can claim it using a claim_value extrinsic. Value is transferred to the user's account and the message is removed from the mailbox.\n\nA message is charged for every block in the mailbox within its gas limit. If the message hasn't an explicit gas limit, gas is borrowed from the origin's limit (e.g. an actor that has initiated the execution).\n\nWhen the message's gas runs out, the message is removed from the mailbox, and the associated value transferred back to the message sender."}